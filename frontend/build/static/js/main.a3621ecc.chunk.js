(this.webpackJsonpfront_app=this.webpackJsonpfront_app||[]).push([[0],{109:function(e,t,a){},140:function(e,t){},145:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),c=a.n(r),i=a(84),l=a(3),s=a(13),m=a(24),u=a.n(m),d=(a(109),function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1];return o.a.createElement("div",{className:"login-page-container"},o.a.createElement("div",{className:"login-box"},o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"Ticnet")),o.a.createElement("div",{className:"name-input"},o.a.createElement("input",{id:"outlined-basic",placeholder:"Enter your name",value:n,onChange:function(e){return r(e.target.value)}})),o.a.createElement("div",{className:"login-button"},o.a.createElement("button",{variant:"contained",color:"primary",onClick:function(){console.log(n);var t,a=(t={name:n},console.log("validation",t),t.name?null:"You must enter a name");if(a)return alert(a);u.a.post("http://localhost:3010/login",{username:n}).then((function(t){e.history.push({pathname:"chatroom",state:{name:n}})})).catch((function(e){console.log(e),alert("There is a problem :/")}))}},"Login to the chat room"))))}),p=a(19),f=a(20),g=a(78),h=a.n(g),b=a(169),x=a(179),E=a(83),v=a.n(E),y=a(40),F=a.n(y),S=a(172),k=a(173),C=a(171),A=a(174),M=a(175),j=a(176),O=a(79),B=(a(145),function(e){var t=e.message;return"voice"===t.type?o.a.createElement("audio",{controls:!0},o.a.createElement("source",{src:t.path,type:"audio/mpeg"})):"file"===t.type?o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",href:t.path,className:"attach-link"},o.a.createElement(b.a,null,t.path.substring(t.path.lastIndexOf("-")+1)),o.a.createElement(C.a,{className:"attach-icon"}))):o.a.createElement(b.a,null,t.msg)}),N=function(e){var t=Object(n.useRef)(),a=o.a.useState([]),r=Object(s.a)(a,2),c=r[0],i=r[1],l=o.a.useState([]),m=Object(s.a)(l,2),d=m[0],g=m[1],b=o.a.useState([]),E=Object(s.a)(b,2),y=E[0],N=E[1],T=o.a.useState(""),w=Object(s.a)(T,2),I=w[0],D=w[1],H=o.a.useState(!1),z=Object(s.a)(H,2),R=z[0],U=z[1],L=o.a.useState(),P=Object(s.a)(L,2),_=P[0],J=P[1],V=o.a.useState(),W=Object(s.a)(V,2),K=(W[0],W[1]),Y=Object(n.useState)(),$=Object(s.a)(Y,2),q=$[0],G=$[1],Q=Object(n.useState)(),X=Object(s.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useRef)(),ae=Object(n.useRef)(),ne=Object(n.useRef)(),oe=o.a.useRef();Object(n.useEffect)((function(){return oe.current=h.a.connect("http://localhost:3010/socket"),function(){oe.current&&oe.current.disconnect()}}),[]),Object(n.useEffect)((function(){ae.current=I}),[I]),Object(n.useEffect)((function(){u.a.get("http://localhost:3010/getUsers").then((function(t){N(t.data.filter((function(t){return t.username!==e.location.state.name})))})).catch((function(e){alert("\u06cc\u06a9 \u0645\u0634\u06a9\u0644\u06cc \u0647\u0633\u062a \u062a\u0648 \u0644\u06cc\u0633\u062a \u06a9\u0627\u0631\u0628\u0631\u0627")}))}),[]),o.a.useEffect((function(){console.log("render use effect",e.location.state),oe.current.on("newMessage",(function(a){console.log(a),i((function(e){return e.concat(a)})),t.current.scroll(0,t.current.scrollHeight),a.sender.name!==e.location.state.name&&oe.current.emit("seenMessage",{id:a.id,sender:e.location.state.name,receiver:ae.current})})),oe.current.on("deleteMsg",(function(e){i((function(t){var a=-1;return t.forEach((function(t,n){t.id==e&&(a=n)})),re(t,a)}))})),oe.current.on("editMsg",(function(e){var t=e.msg,a=e.id;i((function(e){var n=e.findIndex((function(e){return e.id==a}));return console.log(a,n),-1!==n?[].concat(Object(f.a)(e.slice(0,n)),[Object(p.a)(Object(p.a)({},e[n]),{},{msg:t})],Object(f.a)(e.slice(n+1))):e}))})),oe.current.on("seenMessage",(function(e){i((function(t){var a=t.findIndex((function(t){return t.id==e}));return console.log(e,a),-1!==a?[].concat(Object(f.a)(t.slice(0,a)),[Object(p.a)(Object(p.a)({},t[a]),{},{seen:!0})],Object(f.a)(t.slice(a+1))):t}))})),oe.current.on("isTyping",(function(t){var a=t.username,n=t.isTyping;e.location.state.name!==a&&(console.log("user : "+a+" isTyping:"+n),ee(n))}))}),[]);Object(n.useEffect)((function(){console.log("change isTyping:",q),oe.current.emit("isTyping",{sender:e.location.state.name,receiver:I,isTyping:q})}),[q]);var re=function(e,t){return-1===t?e:[].concat(Object(f.a)(e.slice(0,t)),Object(f.a)(e.slice(t+1)))},ce=function(){d&&(_?(oe.current.emit("editMessage",{id:_,msg:d,sender:e.location.state.name,receiver:I}),J(void 0)):oe.current.emit("newMessage",{id:"",msg:d,sender:{name:e.location.state.name},receiver:{name:I}}),g(""))};return o.a.createElement("div",null,o.a.createElement("div",{className:"paper"},o.a.createElement("div",{className:"paper-container"},o.a.createElement("div",{className:"users-name"},y.map((function(t){return o.a.createElement("div",{className:F()("user-item",t.username===I&&"user-item-active"),onClick:function(){return a=t.username,i([]),I&&oe.current.emit("leftChat",{username:I,myUsername:e.location.state.name}),D(a),void oe.current.emit("joinChat",{username:a,myUsername:e.location.state.name});var a}},t.username)}))),o.a.createElement("div",{className:"header-chatroom"},o.a.createElement("p",{className:"header-chatroom-text"},"Chat With ".concat(I," ").concat(Z?"(is typing...)":""))),o.a.createElement("div",{className:"middle",ref:t},c.map((function(t){return o.a.createElement("div",{className:F()("message",t.sender.name==e.location.state.name&&"message-reverse")},o.a.createElement("div",{className:"message-box"},o.a.createElement("div",{className:F()("message-box-content",t.sender.name!==e.location.state.name?"message-it":"message-me")},o.a.createElement(B,{message:t}),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("p",{className:"message-date"},t.date.split("T")[1].split(".")[0]),t.sender.name===e.location.state.name&&(t.seen?o.a.createElement(S.a,{style:{marginLeft:"0.5rem",color:"#aaa",fontSize:"20px"}}):o.a.createElement(k.a,{style:{marginLeft:"0.5rem",color:"#aaa",fontSize:"20px"}}))))),t.sender.name===e.location.state.name&&o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{onClick:function(){return e=t.id,a=t.msg,g(a),void J(e);var e,a}},o.a.createElement(A.a,{className:"delete-btn"})),o.a.createElement(x.a,{onClick:function(){return e=t.id,void oe.current.emit("deleteMsg",e);var e}},o.a.createElement(M.a,{className:"delete-btn"}))))}))),o.a.createElement("div",{className:"sendbox"},o.a.createElement("div",{className:"sendbox-icons-box"},o.a.createElement("button",{className:"sendbox-icons",onClick:function(){U(!R)}},o.a.createElement(j.a,{style:{color:R?"green":"rgba(0, 0, 0, 0.54)"}}))),o.a.createElement("div",{className:"sendbox-icons-box"},o.a.createElement("button",{className:"sendbox-icons",onClick:function(){te.current.click()}},o.a.createElement(C.a,null)),o.a.createElement("input",{ref:te,type:"file",style:{display:"none"},onChange:function(t){var a=t.target.files;if(a&&a.length>0){K(a[0]);var n=new FormData;n.append("file",a[0]),u.a.post("http://localhost:3010/uploadFile",n).then((function(t){var a=t.data.filePath;oe.current.emit("uploadFile",{path:a,sender:{name:e.location.state.name},receiver:{name:ae.current}})})).catch((function(e){alert("\u0641\u0627\u06cc\u0644 \u0634\u0645\u0627 \u0627\u0631\u0633\u0627\u0644 \u0646\u0634\u062f \u0645\u062a\u0627\u0633\u0641\u0627\u0646\u0647")}))}}})),o.a.createElement("div",{className:"sendbox-input"},o.a.createElement("input",{value:d,onChange:function(e){g(e.target.value),q||G(!0),ne.current&&clearTimeout(ne.current),ne.current=setTimeout((function(){G(!1)}),2e3)},className:"mini-input-sendbox",onKeyDown:function(e){"Enter"===e.key&&ce()}})),o.a.createElement("div",{className:"sendbox-icons-box"},o.a.createElement("button",{className:"sendbox-icons",onClick:ce},o.a.createElement(v.a,null)))))),o.a.createElement(O.ReactMic,{record:R,className:"sound-wave",onStop:function(t){console.log("recordedBlob is: ",t);var a=new FormData;a.append("voiceMessage",t.blob),u.a.post("http://localhost:3010/uploadVoice",a).then((function(t){console.log(t.data),console.log({filePath:t.data.filePath,sender:{name:e.location.state.name},receiver:{name:ae.current}}),oe.current.emit("uploadVoice",{path:t.data.filePath,sender:{name:e.location.state.name},receiver:{name:ae.current}})})).catch((function(e){console.log(e),alert("\u0627\u0631\u0633\u0627\u0644 \u0646\u0634\u062f \u0648\u06cc\u0633 \u0634\u0645\u0627")}))},onData:function(e){},strokeColor:"#000000",backgroundColor:"#FF4081"}))},T=function(){return o.a.createElement(i.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/chatroom",component:N}),o.a.createElement(l.a,{path:"/login",component:d}),o.a.createElement(l.a,{component:d})))},w=a(177),I=a(15),D=a.n(I),H={direction:"rtl",palette:{primary:{main:"#34495E",light:D()("#34495E").lighten(7.5).toHexString(),dark:D()("#34495E").darken(15).toHexString()},secondary:{main:"#C0392B",light:D()("#C0392B").lighten(7.5).toHexString(),dark:D()("#C0392B").darken(15).toHexString(),contrastText:"#FFFFFF"},warning:{main:"#FFC260",light:D()("#FFC260").lighten(7.5).toHexString(),dark:D()("#FFC260").darken(15).toHexString()},success:{main:"#3CD4A0",light:D()("#3CD4A0").lighten(7.5).toHexString(),dark:D()("#3CD4A0").darken(15).toHexString()},info:{main:"#9013FE",light:D()("#9013FE").lighten(7.5).toHexString(),dark:D()("#9013FE").darken(15).toHexString()},text:{primary:"#4A4A4A",secondary:"#6E6E6E",hint:"#B9B9B9"},background:{default:"#F6F7FF",light:"#F3F5FF"}},customShadows:{widget:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetDark:"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetWide:"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"},overrides:{MuiBackdrop:{root:{backgroundColor:"#4A4A4A1A"}},MUIDataTableBodyRow:{responsiveStacked:{"@media (max-width: 959.95px)":{border:"none !important"}},root:{cursor:"pointer !important"},actions:{display:"none"},icon:{display:"none"}},MUIDataTableHead:{responsiveStacked:{"@media (max-width: 959.95px)":{display:"table-header-group !important"}}},MUIDataTableBodyCell:{root:{textAlign:"right",fontFamily:"Shabnam"},responsiveStacked:{"@media (max-width: 959.95px)":{height:"auto",width:"auto",fontSize:"16px",display:"table-cell",whiteSpace:"normal"}},cellStacked:{"@media (max-width: 959.95px)":{height:"auto",width:"auto",display:"none",fontSize:"16px",whiteSpace:"normal"}}},MuiInputLabel:{formControl:{fontFamily:"Shabnam",right:0,left:"auto",width:"16rem"}},MuiSvgIcon:{root:{left:0,right:"auto !important"}},MUIDataTable:{root:{},caption:{display:"none"},paper:{borderRadius:17}},MuiButtonBase:{root:{fontFamily:"Shabnam !important"}},MuiTypography:{root:{fontFamily:"Shabnam !important"}},MuiTablePagination:{selectIcon:{right:"0 !important"}},MuiMenuItem:{root:{fontFamily:"Shabnam !important"}},MuiInputBase:{input:{fontFamily:"Shabnam !important"}},Toastify__toast:{root:{fontFamily:"Shabnam !important"}},MUIDataTableHeadCell:{root:{textAlign:"right",fontFamily:"Shabnam"}},MUIDataTableSelectCell:{fixedHeader:{display:"none"}},MUIDataTableToolbar:{actions:{textAlign:"left"},root:{borderRadius:"17px 17px 0 0",backgroundColor:"#34495E"},titleText:{color:"white"},icon:{color:"white"}},MuiMenu:{paper:{boxShadow:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"}},MuiSelect:{icon:{color:"#B9B9B9"}},MuiListItemText:{root:{display:"flex"}},MuiListItem:{root:{"&$selected":{backgroundColor:"#F3F5FF !important","&:focus":{backgroundColor:"#F3F5FF"}}},button:{"&:hover, &:focus":{backgroundColor:"#F3F5FF"}}},MuiTouchRipple:{child:{backgroundColor:"white"}},MuiTableRow:{root:{height:56}},MuiDivider:{root:{marginTop:"16px",marginBottom:"16px"}},MuiPrivateTextarea:{root:{height:"100%"}},MuiTableCell:{root:{borderBottom:"1px solid rgba(224, 224, 224, .5)"},head:{fontSize:"0.95rem"},body:{fontSize:"0.95rem"}}}},z=a(85),R={default:Object(z.a)(Object(p.a)(Object(p.a)({},H),{typography:{h1:{fontSize:"3rem"},h2:{fontSize:"2rem"},h3:{fontSize:"1.64rem"},h4:{fontSize:"1.5rem"},h5:{fontSize:"1.285rem"},h6:{fontSize:"1.142rem"}}}))},U=a(178);c.a.render(o.a.createElement(w.a,{theme:R.default},o.a.createElement(U.a,null),o.a.createElement(T,null)),document.getElementById("root"))},88:function(e,t,a){e.exports=a(150)}},[[88,1,2]]]);
//# sourceMappingURL=main.a3621ecc.chunk.js.map