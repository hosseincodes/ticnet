{"version":3,"sources":["pages/login/LoginPage.js","pages/chatroom/ChatRoom.js","App.js","themes/default.js","themes/index.js","index.js"],"names":["LoginPage","props","React","useState","name","setName","className","id","placeholder","value","onChange","e","target","variant","color","onClick","console","log","user","error","alert","axios","post","username","then","res","history","push","pathname","state","catch","err","MessageBody","message","type","controls","src","path","href","Typography","substring","lastIndexOf","AttachFileRounded","msg","ChatRoom","scrollableGrid","useRef","messages","setMessages","newMessage","setNewMessage","users","setUsers","setUser","record","setRecord","messageForEdit","setMessageForEdit","setAttachment","isTyping","setIsTyping","isTypingReceiver","setIsTypingReceiver","inputFileRef","userRef","isTypingTimeoutId","socket","useEffect","current","SocketIOClient","connect","disconnect","get","data","filter","item","location","on","concat","scroll","scrollHeight","sender","emit","receiver","findIndex","forEach","index","removeItemWithSlice","slice","seen","items","sendMessage","undefined","map","userItem","classNames","myUsername","ref","style","display","alignItems","date","split","marginLeft","fontSize","IconButton","Edit","Delete","click","files","length","FormData","append","filePath","clearTimeout","setTimeout","onKeyDown","key","onStop","recordedBlob","formData","blob","onData","strokeColor","backgroundColor","App","exact","component","direction","palette","primary","main","light","tinycolor","lighten","toHexString","dark","darken","secondary","contrastText","warning","success","info","text","hint","background","default","customShadows","widget","widgetDark","widgetWide","overrides","MuiBackdrop","root","MUIDataTableBodyRow","responsiveStacked","border","cursor","actions","icon","MUIDataTableHead","MUIDataTableBodyCell","textAlign","fontFamily","height","width","whiteSpace","cellStacked","MuiInputLabel","formControl","right","left","MuiSvgIcon","MUIDataTable","caption","paper","borderRadius","MuiButtonBase","MuiTypography","MuiTablePagination","selectIcon","MuiMenuItem","MuiInputBase","input","Toastify__toast","MUIDataTableHeadCell","MUIDataTableSelectCell","fixedHeader","MUIDataTableToolbar","titleText","MuiMenu","boxShadow","MuiSelect","MuiListItemText","MuiListItem","button","MuiTouchRipple","child","MuiTableRow","MuiDivider","marginTop","marginBottom","MuiPrivateTextarea","MuiTableCell","borderBottom","head","body","createMuiTheme","defaultTheme","typography","h1","h2","h3","h4","h5","h6","ReactDOM","render","ThemeProvider","theme","Themes","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.a3621ecc.chunk.js","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './style.css';\r\n\r\nconst LoginPage = (props) => {\r\n\r\n  const [name, setName] = React.useState(\"\");\r\n\r\n  const validation = (user) => {\r\n    console.log(\"validation\", user);\r\n    if (!user.name)\r\n      return \"You must enter a name\"\r\n    return null;\r\n  }\r\n\r\n  const submit = () => {\r\n    console.log(name);\r\n    const error = validation({name});\r\n    if (error)\r\n      return alert(error);\r\n    axios.post(\"http://localhost:3010/login\", {\r\n      username: name,\r\n    }).then(res => {\r\n      props.history.push({\r\n        pathname: \"chatroom\",\r\n        state: {\r\n          name,\r\n        }\r\n      });\r\n    }).catch(err => {\r\n      console.log(err);\r\n      alert(\"There is a problem :/\")\r\n    });\r\n  }\r\n\r\n  return (\r\n      <div className=\"login-page-container\">\r\n\r\n        <div className=\"login-box\">\r\n\r\n          <div className=\"header\">\r\n\r\n            <h1>Ticnet</h1>\r\n\r\n          </div>\r\n\r\n          <div className=\"name-input\">\r\n\r\n            <input\r\n              id=\"outlined-basic\"\r\n              placeholder=\"Enter your name\"\r\n              value={name}\r\n              onChange={e => setName(e.target.value)}\r\n            />\r\n\r\n          </div>\r\n\r\n          <div className=\"login-button\">\r\n\r\n            <button variant=\"contained\" color=\"primary\" onClick={submit}>Login to the chat room</button>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;","import React, { useEffect, useRef, useState } from 'react';\r\nimport SocketIOClient from 'socket.io-client';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport classNames from 'classnames';\r\nimport { Done as SentIcon, DoneAll as SeenIcon } from '@material-ui/icons';\r\nimport {\r\n  AttachFileRounded,\r\n  Delete as DeleteIcon,\r\n  Edit as EditIcon,\r\n  MicRounded as MicIcon,\r\n} from '@material-ui/icons';\r\nimport axios from 'axios';\r\nimport { ReactMic } from 'react-mic';\r\nimport './style.css';\r\n\r\nconst MessageBody = ({ message }) => {\r\n  if (message.type === 'voice')\r\n    return (\r\n      <audio controls>\r\n        <source src={message.path} type={'audio/mpeg'} />\r\n      </audio>\r\n    );\r\n  if (message.type === 'file')\r\n    return (\r\n      <div>\r\n        <a target={'_blank'} href={message.path} className=\"attach-link\">\r\n          <Typography>\r\n            {message.path.substring(message.path.lastIndexOf('-') + 1)}\r\n          </Typography>\r\n          <AttachFileRounded className=\"attach-icon\" />\r\n        </a>\r\n      </div>\r\n    );\r\n  else return <Typography>{message.msg}</Typography>;\r\n};\r\n\r\nconst ChatRoom = (props) => {\r\n  const scrollableGrid = useRef();\r\n  const [messages, setMessages] = React.useState([]);\r\n  const [newMessage, setNewMessage] = React.useState([]);\r\n  const [users, setUsers] = React.useState([]);\r\n  const [user, setUser] = React.useState('');\r\n  const [record, setRecord] = React.useState(false);\r\n  const [messageForEdit, setMessageForEdit] = React.useState();\r\n  const [attachment, setAttachment] = React.useState();\r\n  const [isTyping, setIsTyping] = useState();\r\n  const [isTypingReceiver, setIsTypingReceiver] = useState();\r\n\r\n  const inputFileRef = useRef();\r\n  const userRef = useRef();\r\n  const isTypingTimeoutId = useRef();\r\n\r\n  const socket = React.useRef();\r\n\r\n  useEffect(() => {\r\n    socket.current = SocketIOClient.connect('http://localhost:3010/socket');\r\n    return () => {\r\n      if (socket.current) socket.current.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    userRef.current = user;\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get('http://localhost:3010/getUsers')\r\n      .then((res) => {\r\n        setUsers(\r\n          res.data.filter(\r\n            (item) => item.username !== props.location.state.name,\r\n          ),\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        alert('یک مشکلی هست تو لیست کاربرا');\r\n      });\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    console.log('render use effect', props.location.state);\r\n    socket.current.on('newMessage', (message) => {\r\n      console.log(message);\r\n      setMessages((messages) => messages.concat(message));\r\n      scrollableGrid.current.scroll(0, scrollableGrid.current.scrollHeight);\r\n      if (message.sender.name !== props.location.state.name)\r\n        socket.current.emit('seenMessage', {\r\n          id: message.id,\r\n          sender: props.location.state.name,\r\n          receiver: userRef.current,\r\n        });\r\n    });\r\n    socket.current.on('deleteMsg', (id) => {\r\n      setMessages(function (messages) {\r\n        let findIndex = -1;\r\n        messages.forEach((message, index) => {\r\n          if (message.id == id) {\r\n            findIndex = index;\r\n          }\r\n        });\r\n        return removeItemWithSlice(messages, findIndex);\r\n      });\r\n    });\r\n    socket.current.on('editMsg', ({ msg, id }) => {\r\n      setMessages((messages) => {\r\n        const index = messages.findIndex((item) => item.id == id);\r\n        console.log(id, index);\r\n        if (index !== -1) {\r\n          return [\r\n            ...messages.slice(0, index),\r\n            { ...messages[index], msg: msg },\r\n            ...messages.slice(index + 1),\r\n          ];\r\n        } else return messages;\r\n      });\r\n    });\r\n    socket.current.on('seenMessage', (id) => {\r\n      setMessages((messages) => {\r\n        const index = messages.findIndex((item) => item.id == id);\r\n        console.log(id, index);\r\n        if (index !== -1) {\r\n          return [\r\n            ...messages.slice(0, index),\r\n            { ...messages[index], seen: true },\r\n            ...messages.slice(index + 1),\r\n          ];\r\n        } else return messages;\r\n      });\r\n    });\r\n    socket.current.on('isTyping', ({ username, isTyping }) => {\r\n      if (props.location.state.name !== username) {\r\n        console.log('user : ' + username + ' isTyping:' + isTyping);\r\n        setIsTypingReceiver(isTyping);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleChangeMessage = (e) => {\r\n    setNewMessage(e.target.value);\r\n    if (!isTyping) setIsTyping(true);\r\n    if (isTypingTimeoutId.current) clearTimeout(isTypingTimeoutId.current);\r\n    isTypingTimeoutId.current = setTimeout(() => {\r\n      setIsTyping(false);\r\n    }, 2000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('change isTyping:', isTyping);\r\n    socket.current.emit('isTyping', {\r\n      sender: props.location.state.name,\r\n      receiver: user,\r\n      isTyping,\r\n    });\r\n  }, [isTyping]);\r\n\r\n  const removeItemWithSlice = (items, index) => {\r\n    if (index === -1) return items;\r\n    return [...items.slice(0, index), ...items.slice(index + 1)];\r\n  };\r\n\r\n  const startRecordVoice = () => {\r\n    if (record) setRecord(false);\r\n    else setRecord(true);\r\n  };\r\n  const attachFile = () => {\r\n    inputFileRef.current.click();\r\n  };\r\n  const onChangeFile = (e) => {\r\n    const files = e.target.files;\r\n    if (files && files.length > 0) {\r\n      setAttachment(files[0]);\r\n      const data = new FormData();\r\n      data.append('file', files[0]);\r\n      axios\r\n        .post('http://localhost:3010/uploadFile', data)\r\n        .then((res) => {\r\n          const filePath = res.data.filePath;\r\n          socket.current.emit('uploadFile', {\r\n            path: filePath,\r\n            sender: {\r\n              name: props.location.state.name,\r\n            },\r\n            receiver: {\r\n              name: userRef.current,\r\n            },\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          alert('فایل شما ارسال نشد متاسفانه');\r\n        });\r\n    }\r\n  };\r\n  const sendMessage = () => {\r\n    if (!newMessage) return;\r\n    if (messageForEdit) {\r\n      socket.current.emit('editMessage', {\r\n        id: messageForEdit,\r\n        msg: newMessage,\r\n        sender: props.location.state.name,\r\n        receiver: user,\r\n      });\r\n      setMessageForEdit(undefined);\r\n    } else\r\n      socket.current.emit('newMessage', {\r\n        id: '',\r\n        msg: newMessage,\r\n        sender: {\r\n          name: props.location.state.name,\r\n        },\r\n        receiver: {\r\n          name: user,\r\n        },\r\n      });\r\n    setNewMessage('');\r\n  };\r\n\r\n  const _handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const onData = (recordedBlob) => {\r\n    // console.log('chunk of real-time data is: ', recordedBlob);\r\n  };\r\n\r\n  const onStop = (recordedBlob) => {\r\n    console.log('recordedBlob is: ', recordedBlob);\r\n    const formData = new FormData();\r\n    formData.append('voiceMessage', recordedBlob.blob);\r\n    axios\r\n      .post('http://localhost:3010/uploadVoice', formData)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        console.log({\r\n          filePath: res.data.filePath,\r\n          sender: {\r\n            name: props.location.state.name,\r\n          },\r\n          receiver: {\r\n            name: userRef.current,\r\n          },\r\n        });\r\n        socket.current.emit('uploadVoice', {\r\n          path: res.data.filePath,\r\n          sender: {\r\n            name: props.location.state.name,\r\n          },\r\n          receiver: {\r\n            name: userRef.current,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        alert('ارسال نشد ویس شما');\r\n      });\r\n  };\r\n\r\n  const joinChatWithUser = (username) => {\r\n    setMessages([]);\r\n    if (user)\r\n      socket.current.emit('leftChat', {\r\n        username: user,\r\n        myUsername: props.location.state.name,\r\n      });\r\n    setUser(username);\r\n    socket.current.emit('joinChat', {\r\n      username,\r\n      myUsername: props.location.state.name,\r\n    });\r\n  };\r\n  const onDeleteClick = (id) => {\r\n    socket.current.emit('deleteMsg', id);\r\n  };\r\n  const onEditClick = (id, msg) => {\r\n    // socket.current.emit(\"deleteMsg\", id);\r\n    setNewMessage(msg);\r\n    setMessageForEdit(id);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"paper\">\r\n        <div className=\"paper-container\">\r\n          <div className=\"users-name\">\r\n            {users.map((userItem) => (\r\n              <div\r\n                className={classNames(\r\n                  \"user-item\",\r\n                  userItem.username === user && \"user-item-active\",\r\n                )}\r\n                onClick={() => joinChatWithUser(userItem.username)}\r\n              >\r\n                {userItem.username}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"header-chatroom\">\r\n            <p className=\"header-chatroom-text\">\r\n              {`Chat With ${user} ${isTypingReceiver ? '(is typing...)' : ''}`}\r\n            </p>\r\n          </div>\r\n          <div className=\"middle\" ref={scrollableGrid}>\r\n            {messages.map((message) => {\r\n              return (\r\n\r\n                <div className={classNames(\r\n                  \"message\",\r\n                  message.sender.name == props.location.state.name &&\r\n                    \"message-reverse\",\r\n                )}>\r\n                  \r\n                  <div className=\"message-box\">\r\n\r\n                    <div\r\n                      className={classNames(\r\n                        \"message-box-content\",\r\n                        message.sender.name !== props.location.state.name\r\n                          ? \"message-it\"\r\n                          : \"message-me\",\r\n                      )}>\r\n\r\n                      <MessageBody message={message} />\r\n\r\n                      <div style={{ display: 'flex', alignItems: 'center' }}>\r\n\r\n                        <p className=\"message-date\">\r\n                          {message.date.split('T')[1].split('.')[0]}\r\n                        </p>\r\n\r\n                        {message.sender.name === props.location.state.name &&\r\n                          (message.seen ? (\r\n                            <SeenIcon style={{ marginLeft: '0.5rem', color: '#aaa', fontSize: '20px' }} />\r\n                          ) : (\r\n                            <SentIcon style={{ marginLeft: '0.5rem', color: '#aaa', fontSize: '20px' }} />\r\n                        ))}\r\n\r\n                      </div>\r\n\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                  {message.sender.name === props.location.state.name && (\r\n                          <>\r\n                            <IconButton\r\n                              onClick={() =>\r\n                                onEditClick(message.id, message.msg)\r\n                              }\r\n                            >\r\n                              <EditIcon className=\"delete-btn\" />\r\n                            </IconButton>\r\n\r\n                            <IconButton\r\n                              onClick={() => onDeleteClick(message.id)}\r\n                            >\r\n\r\n                              <DeleteIcon className=\"delete-btn\" />\r\n\r\n                            </IconButton>\r\n                          </>\r\n                        )}\r\n\r\n                </div>\r\n\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"sendbox\">\r\n            <div className=\"sendbox-icons-box\">\r\n              <button className=\"sendbox-icons\" onClick={startRecordVoice}>\r\n                <MicIcon style={{ color: record ? 'green' : 'rgba(0, 0, 0, 0.54)' }} />\r\n              </button>\r\n            </div>\r\n            <div className=\"sendbox-icons-box\">\r\n              <button className=\"sendbox-icons\" onClick={attachFile}>\r\n                <AttachFileRounded />\r\n              </button>\r\n              <input\r\n                ref={inputFileRef}\r\n                type={'file'}\r\n                style={{ display: 'none' }}\r\n                onChange={onChangeFile}\r\n              />\r\n            </div>\r\n            <div className=\"sendbox-input\">\r\n              <input\r\n                value={newMessage}\r\n                onChange={handleChangeMessage}\r\n                className=\"mini-input-sendbox\"\r\n                onKeyDown={_handleKeyDown}\r\n              />\r\n            </div>\r\n            <div className=\"sendbox-icons-box\">\r\n              <button className=\"sendbox-icons\" onClick={sendMessage}>\r\n                <SendIcon />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ReactMic\r\n        record={record}\r\n        className=\"sound-wave\"\r\n        onStop={onStop}\r\n        onData={onData}\r\n        strokeColor=\"#000000\"\r\n        backgroundColor=\"#FF4081\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;","import React from 'react';\r\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\r\nimport LoginPage from \"./pages/login/LoginPage\";\r\nimport ChatRoom from \"./pages/chatroom/ChatRoom\";\r\n\r\nconst App = () => {\r\n  return <BrowserRouter>\r\n    <Switch>\r\n      <Route exact path=\"/chatroom\" component={ChatRoom}/>\r\n      <Route path=\"/login\" component={LoginPage}/>\r\n      <Route component={LoginPage}/>\r\n    </Switch>\r\n  </BrowserRouter>\r\n};\r\n\r\nexport default App;","import tinycolor from \"tinycolor2\";\n\nconst primary = \"#34495E\";\nconst secondary = \"#C0392B\";\nconst warning = \"#FFC260\";\nconst success = \"#3CD4A0\";\nconst info = \"#9013FE\";\n\nconst lightenRate = 7.5;\nconst darkenRate = 15;\n\nexport default {\n  direction: 'rtl',\n  palette: {\n    primary: {\n      main: primary,\n      light: tinycolor(primary)\n        .lighten(lightenRate)\n        .toHexString(),\n      dark: tinycolor(primary)\n        .darken(darkenRate)\n        .toHexString(),\n    },\n    secondary: {\n      main: secondary,\n      light: tinycolor(secondary)\n        .lighten(lightenRate)\n        .toHexString(),\n      dark: tinycolor(secondary)\n        .darken(darkenRate)\n        .toHexString(),\n      contrastText: \"#FFFFFF\",\n    },\n    warning: {\n      main: warning,\n      light: tinycolor(warning)\n        .lighten(lightenRate)\n        .toHexString(),\n      dark: tinycolor(warning)\n        .darken(darkenRate)\n        .toHexString(),\n    },\n    success: {\n      main: success,\n      light: tinycolor(success)\n        .lighten(lightenRate)\n        .toHexString(),\n      dark: tinycolor(success)\n        .darken(darkenRate)\n        .toHexString(),\n    },\n    info: {\n      main: info,\n      light: tinycolor(info)\n        .lighten(lightenRate)\n        .toHexString(),\n      dark: tinycolor(info)\n        .darken(darkenRate)\n        .toHexString(),\n    },\n    text: {\n      primary: \"#4A4A4A\",\n      secondary: \"#6E6E6E\",\n      hint: \"#B9B9B9\",\n    },\n    background: {\n      default: \"#F6F7FF\",\n      light: \"#F3F5FF\",\n    },\n  },\n  customShadows: {\n    widget:\n      \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\n    widgetDark:\n      \"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\n    widgetWide:\n      \"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\n  },\n  overrides: {\n    MuiBackdrop: {\n      root: {\n        backgroundColor: \"#4A4A4A1A\",\n      },\n    },\n    MUIDataTableBodyRow: {\n      responsiveStacked: {\n        '@media (max-width: 959.95px)': {\n          border: 'none !important',\n        },\n      },\n      root: {\n        cursor: 'pointer !important',\n      },\n      actions: {\n        display: 'none',\n      },\n      icon: {\n        display: 'none',\n      },\n    },\n    MUIDataTableHead: {\n      responsiveStacked: {\n        '@media (max-width: 959.95px)': {\n          display: 'table-header-group !important',\n        },\n      },\n    },\n    MUIDataTableBodyCell: {\n      root: {\n        textAlign: 'right',\n        fontFamily: 'Shabnam',\n      },\n      responsiveStacked: {\n        '@media (max-width: 959.95px)': {\n          height: 'auto',\n          width: 'auto',\n          fontSize: '16px',\n          display: 'table-cell',\n          whiteSpace: 'normal',\n        },\n      },\n      cellStacked: {\n        '@media (max-width: 959.95px)': {\n          height: 'auto',\n          width: 'auto',\n          display: 'none',\n          fontSize: '16px',\n          whiteSpace: 'normal',\n        },\n      },\n    },\n    MuiInputLabel: {\n      formControl: {\n        fontFamily: 'Shabnam',\n        right: 0,\n        left: 'auto',\n        width : '16rem'\n      },\n    },\n    MuiSvgIcon: {\n      root: {\n        left: 0,\n        right: 'auto !important',\n      },\n    },\n    MUIDataTable: {\n      root : {\n      },\n      caption: {\n        display: 'none',\n      },\n      paper: {\n        borderRadius: 17\n      }\n    },\n    MuiButtonBase: {\n      root: {\n        fontFamily: 'Shabnam !important',\n      },\n    },\n    MuiTypography: {\n      root: {\n        fontFamily: 'Shabnam !important',\n      },\n    },\n    MuiTablePagination: {\n      selectIcon: {\n        right: '0 !important',\n      },\n    },\n    MuiMenuItem: {\n      root: {\n        fontFamily: 'Shabnam !important',\n      },\n    },\n    MuiInputBase: {\n      input: {\n        fontFamily: 'Shabnam !important',\n      },\n    },\n    Toastify__toast: {\n      root: {\n        fontFamily: 'Shabnam !important',\n      },\n    },\n    MUIDataTableHeadCell: {\n      root: {\n        textAlign: 'right',\n        fontFamily: 'Shabnam',\n      },\n    },\n    MUIDataTableSelectCell: {\n      fixedHeader: {\n        display: 'none',\n      },\n    },\n    MUIDataTableToolbar: {\n      actions: {\n        textAlign: 'left',\n      },\n      root: {\n        borderRadius: '17px 17px 0 0',\n        backgroundColor: primary\n      }\n      , titleText: {\n        color: 'white'\n      }\n      , icon: {\n        color: 'white'\n      }\n    },\n    MuiMenu: {\n      paper: {\n        boxShadow:\n          \"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A\",\n      },\n    },\n    MuiSelect: {\n      icon: {\n        color: \"#B9B9B9\",\n      },\n    },\n    MuiListItemText: {\n      root : {\n      display:'flex',\n      }\n    },\n    MuiListItem: {\n      root: {\n        \"&$selected\": {\n          backgroundColor: \"#F3F5FF !important\",\n          \"&:focus\": {\n            backgroundColor: \"#F3F5FF\",\n          },\n        },\n      },\n      button: {\n        \"&:hover, &:focus\": {\n          backgroundColor: \"#F3F5FF\",\n        },\n      },\n    },\n    MuiTouchRipple: {\n      child: {\n        backgroundColor: \"white\",\n      },\n    },\n    MuiTableRow: {\n      root: {\n        height: 56,\n      },\n    },\n    MuiDivider: {\n      root: {\n        marginTop: '16px',\n        marginBottom: '16px',\n      },\n    },\n    MuiPrivateTextarea: {root: {height: '100%'}},\n    MuiTableCell: {\n      root: {\n        borderBottom: \"1px solid rgba(224, 224, 224, .5)\",\n      },\n      head: {\n        fontSize: \"0.95rem\",\n      },\n      body: {\n        fontSize: \"0.95rem\",\n      },\n    },\n  },\n};\n","import defaultTheme from \"./default\";\n\nimport { createMuiTheme } from \"@material-ui/core\";\n\nconst overrides = {\n  typography: {\n    h1: {\n      fontSize: \"3rem\",\n    },\n    h2: {\n      fontSize: \"2rem\",\n    },\n    h3: {\n      fontSize: \"1.64rem\",\n    },\n    h4: {\n      fontSize: \"1.5rem\",\n    },\n    h5: {\n      fontSize: \"1.285rem\",\n    },\n    h6: {\n      fontSize: \"1.142rem\",\n    },\n  },\n};\n\nexport default {\n  default: createMuiTheme({ ...defaultTheme, ...overrides }),\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ThemeProvider from \"@material-ui/styles/ThemeProvider\";\nimport Themes from \"./themes\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nReactDOM.render(\n  <ThemeProvider theme={Themes.default}>\n    <CssBaseline/>\n    <App/>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}